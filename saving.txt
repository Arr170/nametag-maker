import React, {useEffect, useState} from 'react'
import axios from 'axios'


function App() {
  const [data, setData] = useState()
  const [file, setFiles] = useState()
  const [compName, setCompName] = useState()
  const [template, setTemplate] = useState('bg_1.png')
  const templates = ['bg_1.png', 'bg_2.png']

  

  function handleCompNamdChange(event){
    setCompName(event.target.value)
    console.log(event.target.value)
  }
  
  function handleTemplateChange(){
    if(template == templates[0]){
      setTemplate(templates[1])
    }
    else{setTemplate(templates[0])}

  }

  async function testFunc () {
    const result = await axios.get('/test')
    console.log(result.data.one)
    setData(result.data.one)
  }
  function handleFileChange (event){
    setFiles(event.target.files[0])
    console.log(event.target.files[0])
  }
  async function doupload (event) {
    event.preventDefault()
    const formData = new FormData()
    formData.append('file', file)//adding file
    formData.append('file', compName)//adding comp name
    formData.append('template', template)//adding tamplate

    console.log('to upload', formData.get('file'))

    axios.post('/data', formData)
    .then(res => console.log(res))
    
  }
  //console.log(data)
  return(
    <div>
        <p>Hello</p>
        <button onClick = {testFunc}>click</button>
        <p>{data}</p>
        <input id="image-file" type="file" name = "gile" onChange={handleFileChange}/>
        <div>
        enter name of your competition: 
        <input id ="comp-name" type = "text" name  = "compName" onChange = {handleCompNamdChange}/>
        </div>
        <div>
        <input id = "template" type = "button" name = "tamplateChangBut" onClick = {handleTemplateChange} value = "change tamplate"/>
        {template}
        </div>
        
        <button type = 'submit' onClick = {doupload}>upload</button>

    </div>
  )
}

export default App;
//{data.one.map( num => <p key = {num}>{num}</p>)}
